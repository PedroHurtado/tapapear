{
  "Store": {
    "properties": {
      "id": {
        "type": "id",
        "strategy": "id_field"
      },
      "name": {
        "type": "primitive",
        "strategy": "direct"
      },
      "location": {
        "type": "geopoint",
        "strategy": "geopoint_value"
      },
      "products": {
        "type": "collection",
        "strategy": "collection_with_paths",
        "diff_strategy": "by_object_equality",
        "collection_metadata": {
          "element_entity": "Product",
          "path_pattern": "stores/{Store.id}/products/{Product.id}",
          "reference_field": "id"
        }
      },
      "categories": {
        "type": "collection",
        "strategy": "collection_with_paths",
        "diff_strategy": "by_object_equality",
        "collection_metadata": {
          "element_entity": "Category",
          "path_pattern": "stores/{Store.id}/categories/{Category.name}",
          "reference_field": "name"
        }
      },
      "region": {
        "type": "primitive",
        "strategy": "direct"
      },
      "phone_numbers": {
        "type": "simple_array",
        "strategy": "direct"
      },
      "operating_hours": {
        "type": "tuple",
        "strategy": "direct"
      }
    },
    "entity_metadata": {
      "type": "document",
      "entity_name": "Store",
      "id_field": "id",
      "collection_name": "stores"
    }
  },
  "Product": {
    "properties": {
      "id": {
        "type": "id",
        "strategy": "id_field"
      },
      "name": {
        "type": "primitive",
        "strategy": "direct"
      },
      "price": {
        "type": "primitive",
        "strategy": "direct"
      },
      "category": {
        "type": "reference",
        "strategy": "reference_path",
        "diff_strategy": "by_object_equality",
        "reference_metadata": {
          "target_entity": "Category",
          "path_resolver": "categories/{Category.id}"
        }
      },
      "tags": {
        "type": "set",
        "strategy": "direct",
        "diff_strategy": "by_object_equality"
      },
      "coordinates": {
        "type": "geopoint",
        "strategy": "geopoint_value"
      },
      "status": {
        "type": "enum",
        "strategy": "direct"
      }
    },
    "entity_metadata": {
      "type": "document",
      "entity_name": "Product",
      "id_field": "id",
      "collection_name": "products"
    }
  },
  "Category": {
    "properties": {
      "id": {
        "type": "id",
        "strategy": "id_field"
      },
      "name": {
        "type": "primitive",
        "strategy": "direct"
      },
      "description": {
        "type": "primitive",
        "strategy": "direct"
      }
    },
    "entity_metadata": {
      "type": "document",
      "entity_name": "Category",
      "id_field": "id",
      "collection_name": "categories"
    }
  },
  "Tag": {
    "properties": {
      "id": {
        "type": "id",
        "strategy": "id_field"
      },
      "name": {
        "type": "primitive",
        "strategy": "direct"
      },
      "color": {
        "type": "primitive",
        "strategy": "direct"
      }
    },
    "entity_metadata": {
      "type": "document",
      "entity_name": "Tag",
      "id_field": "id",
      "collection_name": "tags"
    }
  }
}